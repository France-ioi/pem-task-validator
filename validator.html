<!doctype html>
<html lang="fr">
   <head>
      <meta charset="utf-8">
      <title>PEM task validator (cross domain)</title>
      <style>
         #task-view {
            width: 800px;
            border: 1px solid #000000;
            margin: 20px;
            float:right;
            height:500px;
         }
         .hidden {
            display:none;
         }
      </style>

      <script type="text/javascript" src="bower_components/jquery/dist/jquery.min.js"></script>
      <script type="text/javascript" src="bower_components/pem-platform/task-pr.js"></script>
      <script type="text/javascript" src="validator.js"></script>
   </head>
   <body>
      <p>This page will help you validate a task against PEM API specification (same domain version).</p>
      <iframe src="" id="task-view"></iframe>
      <br>
      answerToken (gradeTask): date, platform, idUser, idItem, sAnswer
      Use tokens? <input type="checkbox" name="bHintsAllowed" value="1" onchange="toggleTokens();"><br>
      <div id="main-token-fields" class="hidden">
         Public key: <input type="text" size="50" id="privateKey" value=""></input><br>
         Private key: <input type="text" size="50" id="privateKey" value=""></input><br>
         Token fields:<br>
         date: <input type="text" size="50" id="date" value=""></input><br>
         idUser:  <input type="text" size="50" id="idUser" value="1"></input><br>
         idItem:  <input type="text" size="50" id="idItem" value="1"></input><br>
         platform: <input type="text" size="50" id="platform" value="1"></input><br>
         bHintsAllowed: <input type="checkbox" name="bHintsAllowed" value="1"><br>
         nbHintsGiven: <input type="text" size="50" id="nbHintsGiven" value="1"></input><br>
         bAuthorsDisplayed: <input type="checkbox" name="bAuthorsDisplayed" value="1"><br>
         bAllowPrivateMetaData: <input type="checkbox" name="bAllowPrivateMetaData" value="1"><br>
         bReadOnly: <input type="checkbox" name="bReadOnly" value="1"><br>
         bAllowGrading: <input type="checkbox" name="bAllowGrading" value="1"><br>
         bHasFullAccess: <input type="checkbox" name="bHasFullAccess" value="1"><br>
         bAccessSolutions: <input type="checkbox" name="bAccessSolutions" value="1"><br>
         bSubmissionPossible: <input type="checkbox" name="bSubmissionPossible" value="1"><br>
      </div>
      <button onclick="setToken()">set token (do it before loading url)</button>
      <button onclick="loadUrl()">load url in iframe (does not load task)</button><input type="text" size="50" id="taskUrl" value=""></input><br>
      <button onclick="loadTask();">load task (all views)</button><br>
      <button onclick="getViews();">get views</button><br>
      <button onclick="getMetaData();">get metadata</button><br>
      <button onclick="showViews();">show views: </button><input size="50" id="views" value='{"task":true,"solution":true,"hints":true,"editor":true}'></input><br>
      <button onclick="getHeight();">get height</button><br>
      <button onclick="reloadAnswer();">reload answer: </button><input size="50" id="answer" value=''></input><br>
      <button onclick="getAnswer();">get answer</button><br>
      <button onclick="reloadState();">reload state: </button><input size="50" id="state" value=''></input><br>
      <button onclick="getState();">get state</button><br>
      <button onclick="updateToken();">update token</button><br>
      <div id="grade-token-fields"  class="hidden">
         Grade token fields:<br>
         date: <input type="text" size="50" id="grade-date" value=""></input><br>
         idUser:  <input type="text" size="50" id="grade-idUser" value="1"></input><br>
         idItem:  <input type="text" size="50" id="grade-idItem" value="1"></input><br>
         platform: <input type="text" size="50" id="grade-platform" value="1"></input><br>
         sAnswer: <input type="text" size="50" id="grade-sAnswer" value="1"></input><br>
      </div>
      <button onclick="gradeTask();">grade task</button><input size="50" id="graderanswer" value=''></input><br>
      <button onclick="unloadTask();">unload task</button><br>
      <button onclick="clearLogs();">clear logs</button><br>
      <div><pre class="messages" style="clear: left;"></pre></div>
   </body>
</html>
